# Практическое задание по 10 спринту

## Задание 1 - анализ состояния As-Is

1. Выявите конфиденциальные данные, которые не учтены во внутренних системах
    1. Для этого проанализируйте информацию о компании 
        - [анализ](Exc1/ANALYZE.md)
    2. Создайте диаграммы потоков данных (Data Flow Diagrams). Для каждого процесса создайте отдельную диаграмму. Отобразите на них, как данные перемещаются по системам компании и какие операции над ними совершают.
        - [Файл диаграмм](Exc1/data-flow-diagrams.drawio). Описано 4 процесса (отдельные листы), касающихся конфиденциальных данных пациентов.
    3. Неучтенные данные:
        - Согласия на обработку данных
        - Договора
        - Возможно паспортные данные используются тоже (стоит проверить)
2. Проведите аудит мер по обеспечению безопасности данных - [файл аудита](Exc1/AUDIT.md)
3. Подумайте, что можно улучшить - [файл улучшений](Exc1/IMPROVE.md) и [доработанные диаграммы](Exc1/data-flow-diagrams-improve.drawio)

## Задание 2 - формирование To-Be

### Задание
> Спроектируйте решение To-Be для MVP. Подготовьте диаграмму контейнеров в модели C4. Отобразите на ней свои предложения по усилению Data Privacy — как системы должны работать с конфиденциальными данными.
> Опишите в блоках комментариев:
> как данные хранятся,
> периоды и условия уничтожения конфиденциальных данных после обработки,
> какие способы защиты данных используются при хранении и передаче данных.

### Описание MVP
>Промежуточное состояние (через пару месяцев). MVP, в котором клиент сможет самостоятельно записаться на приём к специалисту через портал компании. При этом команда ресепшена будет видеть эту запись: сотрудники смогут отследить запись в системе и за день до приёма напомнить про него и пациенту, и специалисту. Необходимо определить категории данных пациентов и разнести их по различным доменам. Для каждой категории данных определить роли (RBAC) или атрибуты (ABAC), на основании которых сотрудникам будет разрешён доступ к данным.

### Решение

[Диаграмма C4](Exc2/system-tobe.drawio) - там два листа - "MVP" и "Через год".

#### Состояние MVP

Реализация MVP требуется в достаточно короткий срок (пара месяцев), с учетом необходимости внедрения и переобучения персонала. В MVP варианте должен появиться портал компании с возможностью записи на приём, а значит мы должны в автоматическом режиме знать нагрузку каждого медицинского специалиста и иметь возможность вносить в неё изменения.

Для этого однозначно нужна работа с журналом каждого из специалистов, а для самого факта записи на приём нужна работа с журналом пациентов. На текущий момент это Excel файлы, автоматизацию с которыми делать смысла нет, поэтому их точно нужно заменить на свою информационную систему. Однако сам процесс приёма врача и оформления договора, оплаты пациентом можно не изменять сразу - так мы сократим масштабы переобучения персонала и снизим риски внедрения. В дальнейшем, после MVP, информационная система будет включать в себя всё больше, заменяя собой работу с файлами напрямую, но для MVP это будет излишний риск выйти из сроков.

То есть на этап MVP работы планируются следующие:
1. Включить аудит доступа к данным на общем диске
2. Настроить группы пользователей с ограничениями по доступу к разным папкам общего диска
3. Ограничить доступ к серверному помещению, поставить СКУД с аудитом.
4. Сделать бекенд приложение, которое будет в будущем собственной информационной системой, а в начале заберет на себя задачу ведения журналов пациентов и врачей. 
    - Он будет в локальной сети, без доступа из вне.
    - Он предоставит API для работы с реестром пациентов и журналом приёма врачей
    - Он будет вести полный аудит работы с карточками пациентов и журналом врачей.
    - Он будет автоматически выдавать и забирать доступ к директориям пациентов на общем диске врачам. В день приёма врач получает доступ к директории с документами пациента, может туда добавлять, удалять данные. А в конце дня доступ забирается.
    - Он будет скрывать все конфиденциальные данные по умолчанию, а выдавать их только при явном запросе, сохраняя в журнал аудита что конфиденциальные данные такой то записи были запрошены таким то пользователем.
    - Он даст API для получения временного доступа к данным конкретного пациента (для ресепшена например, чтобы договора закинуть) с автоматическим отключением доступа через некоторое время.
    - База данных будет хранить шифрованные данные
    - Также будет сделано API для получения данных для бизнес анализа - сразу с обезличиванием.
    - В случае запроса пациента на удаление данных, либо завершении срока хранения данных по договору (например "храним в течении 1 года после последнего обращения") система будет автоматически удалять конфиденциальные данные для сокращения рисков в случае утечек.
    - При внедрении данного бекенда в работу мы импортируем в него данные из Excel - журнал пациентов, журнал приёма врача. То есть данный бекенд (и его база данных) полностью заменит текущие excel таблицы.
5. Для хранения ключей шифрования базы данных нужно будет поднять готовый Key Management Server, который в дальнейшем будет использоваться всё сильнее при расширении ответственности АИС.
6. Сделать небольшой внутренний веб интерфейс для новой ИС, через который сотрудники будут работать с новым "журналом пациентов" и "журналом приёма врача". Вместо Excel файлов.
    - Теперь сотрудники не будут по умолчанию видеть конфиденциальные данные. Только по явному запросу данных конкретного пациента.
    - Доступ к файлам конкретного пациента будет также по запросу, с ограниченным временем и аудитом.
7. Сделать портал компании с функцией записи на приём, он будет работать с нашим бекендом через отдельный api gateway (чтобы не было возможности напрямую общаться с ядром всей системы). Сам портал может быть просто собственным бекендом + фронтендом. И вот бекенд портала будет общаться с бекендом всей компании. Бекенд портала будет доступен из вне.
8. Провести обучение сотрудников как теперь работать с журналами пациентов и приёма врача, а также почему такие изменения нужны и важны. Обратить внимание что продолжать работать в Excel или сохранять копии это значительный риск.


Таким образом мы положим начало переходу в автоматизированную информационную систему, с встроенным аудитом, ограничением доступа к данным и в тоже время мы не погрязнем в большой разработке и переработке всех процессов жизни компании. Такой первый шаг также позволит и в дальнейшем (после этапа MVP) продолжить переход в АИС, постепенно отключая вообще физический доступ к файлам всем сотрудникам, оставляя только один способ взаимодействия с конфиденциальными данными - через интерфейс АИС.

#### Состояние через год

Полное состояние через год описано в общих чертах, чтобы было понятно в какую сторону дальше развивается MVP решение. Детали на листе "Через год" в drawio.
